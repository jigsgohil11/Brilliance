@using Brilliance.Infrastructure
@model Brilliance.Models.ViewModel.ComplaintViewModel
@{
    ViewBag.Title = "CRT";
    Layout = "~/Views/Shared/_Layout_public.cshtml";
    int EmpIndex = 0;
}
@*<link href="~/assets/global/plugins/bootstrap-summernote/summernote.css" rel="stylesheet" type="text/css" />

    <link href="~/assets/global/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/plugins/select2/css/select2-bootstrap.min.css" rel="stylesheet" type="text/css" />*@
<link href="~/assets/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker.min.css" rel="stylesheet" />
<style>
    .dropdown-menu open {
        position: sticky;
    }

    .required11:after {
        content: "*";
        font-weight: bold;
        color: red;
    }
</style>
<div class="page-content page-content-dashbrd-backgrnd">
    <div class="page-bar margin-bottom-10">
        <div class="row">
            <div class="col-md-12 padding-out">
                <div class="portlet light padding-header margin-0 custom-padding-bar">
                    <div class="portlet-title portlet-title-Project-custom">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="caption font-dark">
                                    <i class="icon-settings font-dark"></i>
                                    <span class="caption-subject bold uppercase" style="font-size:16px;">Complaints Reporting Tool</span>
                                </div>
                                <div class="uppercase" style="margin-top:25px;font-size:16px;color:#153e62">Complaints Register - September 2019</div>
                            </div>
                            <div class="col-md-6">
                                <img class="img-responsive pull-right" src="~/assets/global/img/Guard-risk.jpg" style="max-width: 250px; max-height: 110px; line-height: 20px;margin-left:350px;" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row" style="margin-left:-25px;margin-right:-25px;margin-top:-5px;">
        <div class="col-lg-12">
            <div class="portlet light bordered">
                <div class="portlet-title tabbable-line">
                    <ul class="nav nav-tabs employee employeeedit">
                        <li class="active">
                            <a href="#tab1" id="m_tabs_5_1">
                                Complaint Detail
                            </a>
                        </li>
                        <li>
                            <a href="#tab2" id="m_tabs_5_2">
                                Complaint Resolution
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="portlet-body form">
                    <form action="/CRT/SaveComplaint" id="frmComplaint" data-ajax-success="SaveComplaintResponse(data);" data-ajax="true" data-ajax-method="Post" data-ajax-begin="ShowLoader();">
                        <div class="tab-pane active" id="profile-edit">
                            <div class="row">
                                <div class="col-md-12">
                                    @Html.HiddenFor(m => m.complaint.ComplaintID)
                                    <div class="tab-content">
                                        <div class="tab-pane active" id="tab1" role="tabpanel">
                                            @*<input type="hidden" value="@Model.assignment.TaskAssignedEmployeeIDs" id="TaskAssignedEmployeeIDs" name="TaskAssignedEmployeeIDs" />*@
                                            @*@if (Model.assignment.AssignmentStatus_Term != null)
                                                {
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div class="note note-info float-right margin-0" style="padding: 5px 10px 5px 10px;font-size:16px;">
                                                                <label class="sbold margin-0 font-blue-steel">Status : </label>
                                                                <span class="sbold caption-subject">@Model.assignment.AssignmentStatus_Term</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }*@
                                            <div class="form-body">
                                                @*<input type="hidden" name="assignment.ProposalID" id="assignment_ProposalID" value="@Model.assignment.ProposalID" />*@
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Company<span style="font-weight: bold;color: red;">*</span></label>
                                                            @Html.DropDownListFor(m => m.complaint.CompanyId, new SelectList(Model.CompanyList, "Value", "Text", 0), "--Select Company--", new { @data_live_search = "true", @class = "form-control bs-select", @onchange = "Getdata(this);" })
                                                            @Html.ValidationMessageFor(m => m.complaint.CompanyId)
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Division<span style="font-weight: bold;color: red;">*</span></label>
                                                            @Html.DropDownListFor(m => m.complaint.DivisionId, new SelectList(Model.DivisionList, "Value", "Text", 0), "--Select Division--", new { @data_live_search = "true", @class = "form-control bs-select" })
                                                            @Html.ValidationMessageFor(m => m.complaint.DivisionId)
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="row">
                                                            <div class="col-md-9">
                                                                <div class="form-group">
                                                                    <label>Policy/Account number</label>
                                                                    @Html.TextBoxFor(m => m.complaint.PolicyNumber, new { @class = "form-control m-input", @placeholder = "Enter policy number" })
                                                                    @Html.ValidationMessageFor(m => m.complaint.PolicyNumber)
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3" style="margin-top:25px;">
                                                                <div class="form-group">
                                                                    <label class="mt-checkbox mt-checkbox-outline" style="font-size:13px;">
                                                                        Not a client
                                                                        @Html.CheckBoxFor(m => m.complaint.IsClient, new { @onclick = "Chkclient(this);" })
                                                                        <span></span>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>ID number</label>
                                                            @Html.TextBoxFor(m => m.complaint.ClientIdentificationNumber, new { @class = "form-control m-input", @placeholder = "Enter ID number" })
                                                            @*@Html.ValidationMessageFor(m => m.complaint.ClientIdentificationNumber)*@
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>First Name</label>
                                                            @Html.TextBoxFor(m => m.complaint.FirstName, new { @class = "form-control m-input", @placeholder = "Enter first name" })
                                                            @Html.ValidationMessageFor(m => m.complaint.FirstName)
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Last Name</label>
                                                            @Html.TextBoxFor(m => m.complaint.LastName, new { @class = "form-control m-input", @placeholder = "Enter last name" })
                                                            @Html.ValidationMessageFor(m => m.complaint.LastName)
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Contact number</label>
                                                            @Html.TextBoxFor(m => m.complaint.PhoneNo, new { @class = "form-control m-input", @placeholder = "Enter contat no." })
                                                            @Html.ValidationMessageFor(m => m.complaint.PhoneNo)
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Email address</label>
                                                            @Html.TextBoxFor(m => m.complaint.Email, new { @class = "form-control email m-input", @placeholder = "Enter email" })
                                                            @Html.ValidationMessageFor(m => m.complaint.Email)
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" id="DisSatisfactionLevel">
                                                        <div class="form-group">
                                                            <label>Level of dissatisfaction</label>
                                                            @Html.DropDownListFor(m => m.complaint.SatisfactionLevel, new SelectList(Model.DisatisfactionLevelList, "Value", "Text", 0), "--Select dissatisfaction level--", new { @data_live_search = "true", @class = "form-control bs-select", @onchange = "chkLevelOfDissatisfaction(this);" })
                                                            @Html.ValidationMessageFor(m => m.complaint.SatisfactionLevel)
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <label>Is this a complaint?</label>
                                                                <div class="mt-radio-inline">
                                                                    <label class="mt-radio mt-radio-outline margin-bottom0" style="font-size:13px;">
                                                                        @Html.RadioButtonFor(m => m.complaint.IsComplaint, "Yes")
                                                                        Yes
                                                                        <span></span>
                                                                    </label>
                                                                    <label class="mt-radio mt-radio-outline margin-bottom0" style="font-size:13px;">
                                                                        @Html.RadioButtonFor(m => m.complaint.IsComplaint, "No")
                                                                        No
                                                                        <span></span>
                                                                    </label>
                                                                </div>
                                                                @*@Html.ValidationMessageFor(m => m.complaint.IsComplaint)*@
                                                            </div>
                                                            <div class="col-md-8">
                                                                <label></label>
                                                                <div class="input-group">
                                                                    <label>Complaint number : <span style="color:rgba(40, 116, 143, 1);font-weight:bold">BR 00112233</span></label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>File note ID: <span>01</span>File note date:  2019.09.16</label>
                                                            @Html.TextAreaFor(m => m.complaint.FirstName, new { @class = "form-control m-input", @placeholder = "Enter Description", @rows = "4" })
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="col-lg-4">
                                                            <div class="form-group">
                                                                <label>Upload Attachment</label>
                                                                <div class="input-group">
                                                                    <div class="fileinput margin-0 fileinput-new" data-provides="fileinput">
                                                                        <span class="btn green btn-file">
                                                                            <span class="fileinput-new"> Select file </span>
                                                                            <span class="fileinput-exists"> Change </span>
                                                                            <input type="file" onchange="Upload(this)" rpid="@EmpIndex" name="Attachment_@EmpIndex" id="Attachment_@EmpIndex" accept=".pdf,.doc,.docx" name="Resume">
                                                                        </span>
                                                                        <label style="color:red;" id="VALmassage"></label>
                                                                        @if (Model != null && Model.NoteList != null && Model.NoteList.Count > 0)
                                                                        {

                                                                            <a target="_blank" href="~/Areas/Hr/Resumes/@Model.NoteList[0].FilePath">
                                                                                <span id="fileid">@Model.NoteList[0].FilePath</span>
                                                                            </a>
                                                                        }
                                                                        <div class="row">
                                                                            <div class="col-lg-12">
                                                                                <span class="fileinput-filename"> </span> &nbsp;
                                                                                <a href="javascript:;" class="close fileinput-exists" data-dismiss="fileinput"> </a>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="row">
                                                            <div class="col-md-5">
                                                                <label>Claim paid :</label>
                                                                <div class="mt-radio-inline">
                                                                    <label class="mt-radio mt-radio-outline margin-bottom0" style="font-size:13px;">
                                                                        @Html.RadioButtonFor(m => m.complaint.Isclaimpaid, "No")
                                                                        No
                                                                        <span></span>
                                                                    </label>
                                                                    <label class="mt-radio mt-radio-outline margin-bottom0" style="font-size:13px;">
                                                                        @Html.RadioButtonFor(m => m.complaint.Isclaimpaid, "Yes")
                                                                        Yes
                                                                        <span></span>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-7">
                                                                <div class="form-group">
                                                                    <label>Claim payment date</label>
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-calendar font-green"></i>
                                                                        </span>
                                                                        @Html.TextBoxFor(m => m.complaint.claimpaymentdate, Constants.DateFormatString, new { @class = "form-control form-control-inline  date-picker", @placeholder = "Select claim payment date" })
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <label>Claim paid amount (excl VAT)</label>
                                                                @Html.TextBoxFor(m => m.complaint.claimpaidamount_exclVAT, new { @class = "form-control m-input" })
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label>Claim paid amount (incl VAT)</label>
                                                                    @Html.TextBoxFor(m => m.complaint.claimpaidamount_inclVAT, new { @class = "form-control m-input" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="row">
                                                            <div class="col-md-5">
                                                                <label>Claimant VAT registered :</label>
                                                                <div class="mt-radio-inline">
                                                                    <label class="mt-radio mt-radio-outline margin-bottom0" style="font-size:13px;">
                                                                        @Html.RadioButtonFor(m => m.complaint.IsVATregistered, "No")
                                                                        No
                                                                        <span></span>
                                                                    </label>
                                                                    <label class="mt-radio mt-radio-outline margin-bottom0" style="font-size:13px;">
                                                                        @Html.RadioButtonFor(m => m.complaint.IsVATregistered, "Yes")
                                                                        Yes
                                                                        <span></span>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-7">
                                                                <div class="form-group">
                                                                    <label>VAT number</label>
                                                                    @Html.TextBoxFor(m => m.complaint.VAT_number, new { @class = "form-control m-input" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label></label>
                                                        <div class="input-group">
                                                            <label>Invoice number : <span style="color:rgba(40, 116, 143, 1);font-weight:bold">BR 00112233</span></label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="row">
                                                            <div class="col-md-5">
                                                                <label>Payee :</label>
                                                                <div class="mt-radio-inline">
                                                                    <label class="mt-radio mt-radio-outline margin-bottom0" style="font-size:13px;">
                                                                        @Html.RadioButtonFor(m => m.complaint.IsPayee, "No")
                                                                        No
                                                                        <span></span>
                                                                    </label>
                                                                    <label class="mt-radio mt-radio-outline margin-bottom0" style="font-size:13px;">
                                                                        @Html.RadioButtonFor(m => m.complaint.IsPayee, "No")
                                                                        Yes
                                                                        <span></span>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-7">
                                                                <div class="form-group">
                                                                    <label>Panel Attorneys</label>
                                                                    @Html.TextBoxFor(m => m.complaint.Panel_Attorneys, new { @class = "form-control m-input" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Regulatory body reference number</label>
                                                            <input type="text" id="AreaTitle" name="AreaTitle" class="form-control m-input" placeholder="Enter reference number" required />
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Case file stage</label>
                                                            @Html.DropDownListFor(m => m.complaint.CaseFileStage, new SelectList(Model.CaseFileStageList, "Value", "Text", 0), "--Select File Stage--", new { @data_live_search = "true", @class = "form-control bs-select" })
                                                            @Html.ValidationMessageFor(m => m.complaint.CaseFileStage)

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Product Category</label>
                                                            @Html.DropDownListFor(m => m.complaint.ComplaintProductTypeId, new SelectList(Model.ProductTypeList, "Value", "Text", 0), "--Select Product Category--", new { @data_live_search = "true", @class = "form-control bs-select", @onchange = "GetProductType(this);" })
                                                            @Html.ValidationMessageFor(m => m.complaint.ComplaintProductTypeId)
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Product Type</label>
                                                            @Html.DropDownListFor(m => m.complaint.ComplaintProductId, new SelectList(Model.ProductCategorylist, "Value", "Text", 0), "--Select Product--", new { @data_live_search = "true", @class = "form-control bs-select" })
                                                            @Html.ValidationMessageFor(m => m.complaint.ComplaintProductId)
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Complaint category<span style="font-weight: bold;color: red;">*</span></label>
                                                            @Html.DropDownListFor(m => m.complaint.ComplaintCategoryId, new SelectList(Model.ComplaintCategoryList, "Value", "Text", 0), "--Select Complaint Category--", new { @data_live_search = "true", @class = "form-control bs-select", @onchange = "GetNatureOfComplaint(this);" })
                                                            @Html.ValidationMessageFor(m => m.complaint.ComplaintCategoryId)
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Nature of complaint<span style="font-weight: bold;color: red;">*</span></label>
                                                            @Html.DropDownListFor(m => m.complaint.ComplaintNatureOfId, new SelectList(Model.ComplaintNatureList, "Value", "Text", 0), "--Select Complaint Nature--", new { @data_live_search = "true", @class = "form-control bs-select" })
                                                            @Html.ValidationMessageFor(m => m.complaint.ComplaintNatureOfId)
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Complaint received date</label>
                                                            <div class="input-group">
                                                                <span class="input-group-addon">
                                                                    <i class="fa fa-calendar font-green"></i>
                                                                </span>
                                                                @Html.TextBoxFor(m => m.complaint.DateReceived, Constants.DateFormatString, new { @class = "form-control form-control-inline  date-picker", @placeholder = "Select recieved date" })
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Complaint incident date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label style="font:5px;"><span class="text-right">(date when dissatisfactory experience occcured)</span></label></label>
                                                            <div class="input-group">
                                                                <span class="input-group-addon">
                                                                    <i class="fa fa-calendar font-green"></i>
                                                                </span>
                                                                @Html.TextBoxFor(m => m.complaint.DateIncident, Constants.DateFormatString, new { @class = "form-control form-control-inline  date-picker", @placeholder = "Select incident date" })
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                @*<div class="row">
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label>Notes</label>
                                                                <textarea id="AreaTitle" name="AreaTitle" class="form-control m-input"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>*@
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="form-group">
                                                            <label>TCF Outcome : <b style="color:lightgray">Outcome</b></label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-actions">
                                                <div class="col-lg-6">
                                                    <button type="button" class="btn btn-primary btnPrevious">Previous</button>
                                                </div>
                                                <div class="col-lg-6 text-right">
                                                    <button type="button" class="btn btn-primary btnNext">Next</button>
                                                    <button type="button" class="btn btn-primary btnSubmit">Save</button>
                                                    <button type="button" onclick="location.href = '/CRT/CRTList'" class="btn default" data-dismiss="modal">Cancel</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tab-pane" id="tab2" role="tabpanel">
                                            @*<div class="form-body"></div>*@
                                            <div class="row margin-top10">
                                                <div class="col-lg-12">
                                                    <div class="portlet-title">
                                                        <div class="caption caption-md">
                                                            <i class="icon-globe theme-font hide"></i>
                                                            <span class="caption-subject font-blue-madison bold uppercase">Complaint status</span>
                                                        </div>
                                                    </div>
                                                    <div class="portlet-body">
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="row">
                                                                    <div class="col-md-4">
                                                                        <label>Complaint resolved?</label>
                                                                        <div class="mt-radio-inline">
                                                                            <label class="mt-radio mt-radio-outline margin-bottom0" style="font-size:13px;">
                                                                                @Html.RadioButtonFor(m => m.complaint.IsResolved, "Yes")
                                                                                Yes
                                                                                <span></span>
                                                                            </label>
                                                                            <label class="mt-radio mt-radio-outline margin-bottom0" style="font-size:13px;">
                                                                                @Html.RadioButtonFor(m => m.complaint.IsResolved, "Not yet")
                                                                                Not yet
                                                                                <span></span>
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-8">
                                                                        <div class="form-group">
                                                                            <label>Complaint resolution date</label>
                                                                            <div class="input-group">
                                                                                <span class="input-group-addon">
                                                                                    <i class="fa fa-calendar font-green"></i>
                                                                                </span>
                                                                                @Html.TextBoxFor(m => m.complaint.DateResolved, Constants.DateFormatString, new { @class = "form-control form-control-inline  date-picker", @placeholder = "Select resolution date" })
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label>Policy status</label>
                                                                    @Html.DropDownListFor(m => m.complaint.ComplaintPolicyStatusId, new SelectList(Model.PolicyList, "Value", "Text", 0), "--Select Policy Status--", new { @data_live_search = "true", @class = "form-control bs-select" })
                                                                    @Html.ValidationMessageFor(m => m.complaint.ComplaintPolicyStatusId)
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label>Root cause</label>
                                                                    @Html.DropDownListFor(m => m.complaint.ComplaintRootCauseId, new SelectList(Model.RootcauseList, "Value", "Text", 0), "--Select Policy Status--", new { @data_live_search = "true", @class = "form-control bs-select" })
                                                                    @Html.ValidationMessageFor(m => m.complaint.ComplaintRootCauseId)
                                                                    @*<select id="company_id" name="comapny_id" class="form-control bs-select" data_live_search="true">
                                                                            <option value=" ">Choose...</option>
                                                                            <option value="Client issues - poor understanding; error">Client issues - poor understanding; error</option>
                                                                            <option value="Employees - error; omission">Employees - error; omission</option>
                                                                            <option value="Guardrisk employees - error; omission">Guardrisk employees - error; omission</option>
                                                                        </select>*@
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label>How complaint received?</label>
                                                                    @Html.DropDownListFor(m => m.complaint.ComplaintReceivedId, new SelectList(Model.ComplaintreceivedList, "Value", "Text", 0), "--Select received method--", new { @data_live_search = "true", @class = "form-control bs-select" })
                                                                    @Html.ValidationMessageFor(m => m.complaint.ComplaintReceivedId)
                                                                    @*<select id="company_id" name="comapny_id" class="form-control bs-select" data_live_search="true">
                                                                            <option value=" ">Choose...</option>
                                                                            <option value="Method - Email">Method - Email</option>
                                                                            <option value="Method - Telephone">Method - Telephone</option>
                                                                            <option value="Method - Fax">Method - Fax</option>
                                                                        </select>*@
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6" id="SatisfactionLevel">
                                                                <div class="form-group">
                                                                    <label>Level of satisfaction after resolution communicated</label>
                                                                    @Html.DropDownListFor(m => m.complaint.Satisfactionlevel_resolution, new SelectList(Model.SatisfactionLevelResolutionList, "Value", "Text", 0), "--Select Satisfaction Level --", new { @data_live_search = "true", @class = "form-control bs-select" })
                                                                    @Html.ValidationMessageFor(m => m.complaint.Satisfactionlevel_resolution)
                                                                    @*<select id="company_id" name="comapny_id" class="form-control bs-select" data_live_search="true">
                                                                            <option value=" ">Choose...</option>
                                                                            <option value="status 1">status 1</option>
                                                                            <option value="status 2">status 2</option>
                                                                            <option value="status 3">status 3</option>
                                                                            <option value="status 4">status 4</option>
                                                                        </select>*@
                                                                </div>
                                                            </div>
                                                            @*<div class="col-md-6">
                                                                    <div class="form-group">
                                                                        <label>Policy status</label>
                                                                        <select id="company_id" name="comapny_id" class="form-control bs-select" data_live_search="true">
                                                                            <option value=" ">Choose...</option>
                                                                            <option value="status 1">status 1</option>
                                                                            <option value="status 2">status 2</option>
                                                                            <option value="status 3">status 3</option>
                                                                            <option value="status 4">status 4</option>
                                                                        </select>
                                                                    </div>
                                                                </div>*@
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label>Complaint from regulatory body?</label>
                                                                    @Html.DropDownListFor(m => m.complaint.ComplaintReceivedRegulatoryId, new SelectList(Model.ComplaintReceivedRegulatoryList, "Value", "Text", 0), "Choose..", new { @data_live_search = "true", @class = "form-control bs-select", @onchange = "chkdropdown(this);" })
                                                                    @Html.ValidationMessageFor(m => m.complaint.ComplaintReceivedRegulatoryId)
                                                                    @*<select id="complaint_regulatory" name="complaint_regulatory" class="form-control bs-select" onchange="chkdropdown(this)" data_live_search="true">
                                                                            <option value="No">No</option>
                                                                            <option value="Banking Ombud">Banking Ombud</option>
                                                                            <option value="Life Ombud">Life Ombud</option>
                                                                            <option value="Short-term Ombud">Short-term Ombud</option>
                                                                        </select>*@
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label>Feedback from regulatory body</label>
                                                                    @Html.DropDownListFor(m => m.complaint.ComplaintReceivedRegulatoryFeedbackId, new SelectList(Model.ComplaintReceivedRegulatoryFeedbackList, "Value", "Text", 0), "Choose..", new { @data_live_search = "true", @class = "form-control bs-select" })
                                                                    @Html.ValidationMessageFor(m => m.complaint.ComplaintReceivedRegulatoryFeedbackId)
                                                                    @*<select id="complaint_feedback" name="comapny_id" class="form-control bs-select" data_live_search="true">
                                                                            <option value="Not Applicable">Not Applicable</option>
                                                                            <option value="Pending">Pending</option>
                                                                            <option value="Received">Received</option>
                                                                        </select>*@
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row margin-top10">
                                                <div class="col-lg-12">
                                                    <div class="portlet-title">
                                                        <div class="caption caption-md">
                                                            <i class="icon-globe theme-font hide"></i>
                                                            <span class="caption-subject font-blue-madison bold uppercase">Overall outcome</span>
                                                        </div>
                                                    </div>
                                                    <div class="portlet-body">
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label>Overall outcome</label>
                                                                    @Html.DropDownListFor(m => m.complaint.ComplaintOverallOutcomeId, new SelectList(Model.ComplaintOverallOutcomeList, "Value", "Text", 0), "--Select Overall Outcome--", new { @data_live_search = "true", @class = "form-control bs-select" })
                                                                    @Html.ValidationMessageFor(m => m.complaint.ComplaintOverallOutcomeId)
                                                                    @*<select id="company_id" name="comapny_id" class="form-control bs-select" data_live_search="true">
                                                                            <option value=" ">Choose...</option>
                                                                            <option value="Client issues - poor understanding; error">Client issues - poor understanding; error</option>
                                                                            <option value="Employees - error; omission">Employees - error; omission</option>
                                                                            <option value="Guardrisk employees - error; omission">Guardrisk employees - error; omission</option>
                                                                        </select>*@
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label>Compensation / Payment</label>
                                                                    @Html.DropDownListFor(m => m.complaint.ComplaintCompensationId, new SelectList(Model.ComplaintCompensationList, "Value", "Text", 0), "--Select Compensation--", new { @data_live_search = "true", @class = "form-control bs-select" })
                                                                    @Html.ValidationMessageFor(m => m.complaint.ComplaintCompensationId)
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label>Regulated costs</label>
                                                                    @Html.DropDownListFor(m => m.complaint.ComplaintRegulatedCostId, new SelectList(Model.ComplaintCompensationList, "Value", "Text", 0), "--Select costs--", new { @data_live_search = "true", @class = "form-control bs-select" })
                                                                    @Html.ValidationMessageFor(m => m.complaint.ComplaintRegulatedCostId)
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label>Value</label>
                                                                    @Html.TextBoxFor(m => m.complaint.CompensationValue, new { @class = "form-control m-input", @placeholder = "Enter value" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-actions">
                                                <div class="col-lg-6">
                                                    <button type="button" class="btn btn-primary btnPrevious">Previous</button>
                                                </div>
                                                <div class="col-lg-6 text-right">
                                                    <button type="button" class="btn btn-primary btnNext">Next</button>
                                                    <button type="submit" class="btn btn-primary btnSubmit">Save</button>
                                                    <button type="button" onclick="location.href = '/CRT/CRTList'" class="btn default" data-dismiss="modal">Cancel</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@section scripts{
    @*<script src="~/assets/global/plugins/bootstrap-summernote/summernote.min.js" type="text/javascript"></script>
        <script src="~/assets/pages/scripts/components-editors.min.js" type="text/javascript"></script>
        <script src="~/assets/global/plugins/select2/js/select2.full.min.js" type="text/javascript"></script>
        <script src="~/assets/pages/scripts/components-select2.min.js" type="text/javascript"></script>*@
    <script>
        function SaveComplaintResponse(response) {
            if (response == "_Logon_") {
                window.location.href = "/Login/Login";
            }
            else {
                if (response.IsSuccess) {
                    SetMessageForPageLoad(response.Message, "complaintsaved");
                    window.location.href = "/CRT/CRTList";
                } else {
                    ShowMessage(response.Message, "error");
                }
            }
        }

        $(document).ready(function () {
            $(".btnPrevious, .btnSubmit").hide();

            $("#m_tabs_5_1").click(function () {
                $("#frmComplaint").valid();
                if ($("#frmComplaint .tab-content .active .field-validation-error").length > 0 || $("#frmComplaint .tab-content .active .field-validation-error").length > 0) { }
                else {
                    $("#tab1").fadeIn();
                    $("#tab1").addClass("active");
                    $("#tab2").removeClass("active");
                    $(this).closest("ul").children("li").removeClass("active");
                    $(this).closest("li").addClass("active");
                    $("#tab2").hide();
                    $(".btnPrevious").hide();
                    $(".btnSubmit").hide();
                    $(".btnNext").show();
                    $(".bs-select").selectpicker('refresh');
                }

                //$("#tab1").fadeIn();
                //$("#tab1").addClass("active");
                //$("#tab2").removeClass("active");
                //$(this).closest("ul").children("li").removeClass("active");
                //$(this).closest("li").addClass("active");
                //$("#tab2").hide();
                //$(".btnPrevious").hide();
                //$(".btnSubmit").hide();
                //$(".btnNext").show();
                //$(".bs-select").selectpicker('refresh');
            });

            $("#m_tabs_5_2").click(function () {
                $("#frmComplaint").valid();
                if ($("#frmComplaint .tab-content .active .field-validation-error").length > 0 || $("#frmComplaint .tab-content .active .field-validation-error").length > 0) { }
                else {
                    $("#tab2").fadeIn();
                    $("#tab2").addClass("active");
                    $("#tab1,#tab3,#tab4,#tab5,#tab6").removeClass("active");
                    $(this).closest("ul").children("li").removeClass("active");
                    $(this).closest("li").addClass("active");
                    $("#tab1,#tab3,#tab4,#tab5,#tab6").hide();
                    $(".btnPrevious").show();
                    $(".btnSubmit").show();
                    $(".btnNext").hide();
                    $(".bs-select").selectpicker('refresh');
                }
                //$("#tab2").fadeIn();
                //$("#tab2").addClass("active");
                //$("#tab1,#tab3,#tab4,#tab5,#tab6").removeClass("active");
                //$(this).closest("ul").children("li").removeClass("active");
                //$(this).closest("li").addClass("active");
                //$("#tab1,#tab3,#tab4,#tab5,#tab6").hide();
                //$(".btnPrevious").show();
                //$(".btnSubmit").show();
                //$(".btnNext").hide();
                //$(".bs-select").selectpicker('refresh');
            });

            if ($("#complaint_regulatory").val() == "No") {
                $('#complaint_feedback').val("Not Applicable");
                $("#complaint_feedback").attr('disabled', 'disabled');
            }
            else {
                $("#complaint_feedback").removeAttr('disabled');
                $('#complaint_feedback').val("Pending");
            }
            $(".bs-select").selectpicker('refresh');
        });

        $(".btnNext").click(function () {
            $("#frmComplaint").valid();
            if ($("#frmComplaint .tab-content .active .field-validation-error").length > 0) { }
            else {
                var selA = $(".employee").find("li.active").children("a").attr("id");
                if (selA == "m_tabs_5_1") {
                    $("#m_tabs_5_2").trigger("click");
                }
            }

            //var selA = $(".employee").find("li.active").children("a").attr("id");
            //if (selA == "m_tabs_5_1") {
            //    $("#m_tabs_5_2").trigger("click");
            //}
        });

        $(".btnPrevious").click(function () {
            var selA = $(".employee").find("li.active").children("a").attr("id");
            if (selA == "m_tabs_5_2") {
                $("#m_tabs_5_1").trigger("click");
            }
        });

        function Chkclient(obj) {
            if ($("#complaint_IsClient").prop('checked') == true) {
                $("#complaint_PolicyNumber").attr('disabled', 'disabled');
                $("#complaint_PolicyNumber").val('');
                var x = document.getElementById("complaint_ComplaintPolicyStatusId");
                for (i = 0; i < x.options.length; i++) {
                    if (document.getElementById("complaint_ComplaintPolicyStatusId").getElementsByTagName("option")[i].text.toString().toUpperCase() == "“NOT A CLIENT") {
                        document.getElementById("complaint_ComplaintPolicyStatusId").getElementsByTagName("option")[i].selected = true;
                    }
                    $('#complaint_ComplaintPolicyStatusId').selectpicker('render');
                    $("#complaint_ComplaintPolicyStatusId").attr('disabled', 'disabled');
                }
            } else {
                $("#complaint_PolicyNumber").removeAttr('disabled');
                $("#complaint_PolicyNumber").val('');
                var x = document.getElementById("complaint_ComplaintPolicyStatusId");
                for (i = 0; i < x.options.length; i++) {
                    if (document.getElementById("complaint_ComplaintPolicyStatusId").getElementsByTagName("option")[i].text.toString().toUpperCase() == "“ACTIVE") {
                        document.getElementById("complaint_ComplaintPolicyStatusId").getElementsByTagName("option")[i].selected = true;
                    }
                    $('#complaint_ComplaintPolicyStatusId').selectpicker('render');
                    //$("#complaint_ComplaintPolicyStatusId").attr('disabled', 'disabled');
                }
            }
        }
        function chkdropdown(obj) {

            if ($("#complaint_ComplaintReceivedRegulatoryId :selected").text() == "NO") {
                var x = document.getElementById("complaint_ComplaintReceivedRegulatoryFeedbackId");
                for (i = 0; i < x.options.length; i++) {
                    if (document.getElementById("complaint_ComplaintReceivedRegulatoryFeedbackId").getElementsByTagName("option")[i].text.toString().toUpperCase() == "NOT APPLICABLE") {
                        document.getElementById("complaint_ComplaintReceivedRegulatoryFeedbackId").getElementsByTagName("option")[i].selected = true;
                    }
                    $('#complaint_ComplaintReceivedRegulatoryFeedbackId').selectpicker('render');
                    $("#complaint_ComplaintReceivedRegulatoryFeedbackId").attr('disabled', 'disabled');
                }
            }
            else {
                $("#complaint_ComplaintReceivedRegulatoryFeedbackId").removeAttr('disabled');
                $('#complaint_ComplaintReceivedRegulatoryFeedbackId').val("");
            }
            $(".bs-select").selectpicker('refresh');
        }

        function chkLevelOfDissatisfaction(obj) {
            if ($("#complaint_SatisfactionLevel :selected").text().toUpperCase() == "NOT DISSATISFIED") {
                var x = document.getElementById("complaint_ComplaintReceivedRegulatoryId");
                for (i = 0; i < x.options.length; i++) {
                    if (document.getElementById("complaint_ComplaintReceivedRegulatoryId").getElementsByTagName("option")[i].text.toString().toUpperCase() == "NO") {
                        document.getElementById("complaint_ComplaintReceivedRegulatoryId").getElementsByTagName("option")[i].selected = true;
                    }
                    $('#complaint_ComplaintReceivedRegulatoryId').selectpicker('render');
                    $("#complaint_ComplaintReceivedRegulatoryId").attr('disabled', 'disabled');
                }
                var y = document.getElementById("complaint_ComplaintOverallOutcomeId");
                for (i = 0; i < x.options.length; i++) {
                    if (document.getElementById("complaint_ComplaintOverallOutcomeId").getElementsByTagName("option")[i].text.toString().toUpperCase() == "REJECTED: NOT A COMPLAINT") {
                        document.getElementById("complaint_ComplaintOverallOutcomeId").getElementsByTagName("option")[i].selected = true;
                    }
                    $('#complaint_ComplaintOverallOutcomeId').selectpicker('render');
                    $("#complaint_ComplaintOverallOutcomeId").attr('disabled', 'disabled');
                }
            }
            else {
                $("#complaint_ComplaintReceivedRegulatoryId").removeAttr('disabled');
                $('#complaint_ComplaintReceivedRegulatoryId').val("");
                $("#complaint_ComplaintOverallOutcomeId").removeAttr('disabled');
                $('#complaint_ComplaintOverallOutcomeId').val("");
            }
            $(".bs-select").selectpicker('refresh');
        }

        function Getdata(Obj) {
            GetCompanyCustomRules(Obj);
            GetDivision(Obj);
            GetProduct(Obj);
        }

        function GetCompanyCustomRules(Obj) {
            //var index = $(Obj).attr('index');
            var companyVal = $('#' + Obj.id).val();
            var postData = { cid: companyVal };
            ShowLoader();
            AjaxCall("/CRT/GetCompanyCustomRules", JSON.stringify(postData), "post", "json", "application/json", false).done(function (data) {
                HideLoader();
                //if (data == "_Logon_") {
                //    window.location.href = "/Login/Login";
                //}
                if (data != null) {
                    if (!data.IsViewDissatisfationLevel)
                        $("#DisSatisfactionLevel").hide();
                    if (!data.IsViewSatisfationLevel)
                        $("#Satisfactionlevel").hide();
                }
                else {

                }
            });
        }

        function GetDivision(Obj) {
            //var index = $(Obj).attr('index');
            var companyVal = $('#' + Obj.id).val();
            var postData = { cid: companyVal };
            ShowLoader();
            AjaxCall("/CRT/GetDivisionByCompany", JSON.stringify(postData), "post", "json", "application/json", false).done(function (data) {
                HideLoader();
                //if (data == "_Logon_") {
                //    window.location.href = "/Login/Login";
                //}
                if (data != null && data.length > 0) {
                    $("#complaint_DivisionId").html('');
                    $("#complaint_DivisionId").append('<option value="">-- Select Division --</option>');
                    $("#complaint_DivisionId").selectpicker('refresh');
                    for (key in data) {
                        $("#complaint_DivisionId").append('<option value="' + data[key].Value + '">' + data[key].Text + '</option>');
                    }
                    $("#complaint_DivisionId").selectpicker('refresh');
                }
                else {
                    $("#complaint_DivisionId").html('');
                    $("#complaint_DivisionId").append('<option value="">-- Select Division --</option>');
                    $("#complaint_DivisionId").selectpicker('refresh');
                }
            });
        }
        function GetProduct(Obj) {
            //var index = $(Obj).attr('index');
            var companyVal = $('#' + Obj.id).val();
            var postData = { cid: companyVal };
            ShowLoader();
            AjaxCall("/CRT/GetProductByCompany", JSON.stringify(postData), "post", "json", "application/json", false).done(function (data) {
                HideLoader();
                //if (data == "_Logon_") {
                //    window.location.href = "/Login/Login";
                //}
                if (data != null && data.length > 0) {
                    $("#complaint_ComplaintProductId").html('');
                    $("#complaint_ComplaintProductId").append('<option value="">-- Select Product --</option>');
                    $("#complaint_ComplaintProductId").selectpicker('refresh');
                    for (key in data) {
                        $("#complaint_ComplaintProductId").append('<option value="' + data[key].Value + '">' + data[key].Text + '</option>');
                    }
                    $("#complaint_ComplaintProductId").selectpicker('refresh');
                }
                else {
                    $("#complaint_ComplaintProductId").html('');
                    $("#complaint_ComplaintProductId").append('<option value="">-- Select Product --</option>');
                    $("#complaint_ComplaintProductId").selectpicker('refresh');
                }
            });
        }

        function GetProductType(Obj) {
            var productCategoryVal = $('#' + Obj.id).val();
            var postData = { id: productCategoryVal };
            ShowLoader();
            AjaxCall("/CRT/GetProductByProductCategory", JSON.stringify(postData), "post", "json", "application/json", false).done(function (data) {
                HideLoader();
                //if (data == "_Logon_") {
                //    window.location.href = "/Login/Login";
                //}
                if (data != null && data.length > 0) {
                    $("#complaint_ComplaintProductId").html('');
                    $("#complaint_ComplaintProductId").append('<option value="">-- Select Product --</option>');
                    $("#complaint_ComplaintProductId").selectpicker('refresh');
                    for (key in data) {
                        $("#complaint_ComplaintProductId").append('<option value="' + data[key].Value + '">' + data[key].Text + '</option>');
                    }
                    $("#complaint_ComplaintProductId").selectpicker('refresh');
                }
                else {
                    $("#complaint_ComplaintProductId").html('');
                    $("#complaint_ComplaintProductId").append('<option value="">-- Select Product --</option>');
                    $("#complaint_ComplaintProductId").selectpicker('refresh');
                }
            });
        }

        function GetNatureOfComplaint(Obj) {
            var complaiutCategoryVal = $('#' + Obj.id).val();
            var postData = { id: complaiutCategoryVal };
            ShowLoader();
            AjaxCall("/CRT/GetNatureOfComplaintList", JSON.stringify(postData), "post", "json", "application/json", false).done(function (data) {
                HideLoader();
                //if (data == "_Logon_") {
                //    window.location.href = "/Login/Login";
                //}
                if (data != null && data.length > 0) {
                    $("#complaint_ComplaintNatureOfId").html('');
                    $("#complaint_ComplaintNatureOfId").append('<option value="">-- Select Complaint Nature --</option>');
                    $("#complaint_ComplaintNatureOfId").selectpicker('refresh');
                    for (key in data) {
                        $("#complaint_ComplaintNatureOfId").append('<option value="' + data[key].Value + '">' + data[key].Text + '</option>');
                    }
                    $("#complaint_ComplaintNatureOfId").selectpicker('refresh');
                }
                else {
                    $("#complaint_ComplaintNatureOfId").html('');
                    $("#complaint_ComplaintNatureOfId").append('<option value="">-- Select Complaint Nature --</option>');
                    $("#complaint_ComplaintNatureOfId").selectpicker('refresh');
                }
            });
        }
    </script>
}



